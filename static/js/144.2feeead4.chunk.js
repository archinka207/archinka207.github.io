"use strict";(self.webpackChunktwentythree=self.webpackChunktwentythree||[]).push([[144],{1144:(e,a,s)=>{s.r(a),s.d(a,{default:()=>j});var r=s(5043),t=s(3260),n=s(342),o=s(8816),l=s(5460),i=s(1719),c=s(5296),d=s(4282),u=s(7417),h=s(579);const m=()=>{var e,a;const[s,m]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[v,x]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),{login:w}=(0,n.A)(),b=(0,t.Zp)(),A=(null===(e=(0,t.zy)().state)||void 0===e||null===(a=e.from)||void 0===a?void 0:a.pathname)||"/";return(0,h.jsxs)(l.A,{onSubmit:async e=>{e.preventDefault(),x(""),y(!0);try{const e=await(0,o.L)({nickname:s,password:g});if(e&&e.accessToken){await w(e.accessToken)?b(A,{replace:!0}):x("Login succeeded, but failed to retrieve user details. Please try again.")}else x("Login successful, but no token received. Please contact support.")}catch(t){var a,r;console.error("Login attempt failed:",t);const e=(null===(a=t.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||t.message||"Login failed. Please check your nickname and password.";x(e)}finally{y(!1)}},children:[v&&(0,h.jsx)(i.A,{variant:"danger",className:"mb-3 py-2",children:v}),(0,h.jsx)(c.A,{controlId:"loginNickname",label:"Nickname",className:"mb-3",children:(0,h.jsx)(l.A.Control,{type:"text",value:s,onChange:e=>m(e.target.value),required:!0,placeholder:"Enter your nickname",disabled:j,autoFocus:!0})}),(0,h.jsx)(c.A,{controlId:"loginPassword",label:"Password",className:"mb-3",children:(0,h.jsx)(l.A.Control,{type:"password",value:g,onChange:e=>p(e.target.value),required:!0,placeholder:"Enter your password",disabled:j,autoComplete:"current-password"})}),(0,h.jsx)(d.A,{variant:"primary",type:"submit",className:"w-100",disabled:j,children:j?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Logging in..."]}):"Login"})]})};var g=s(3519),p=s(1072),v=s(8602),x=s(8628);const j=()=>{const{currentUser:e,loading:a}=(0,n.A)();return a?(0,h.jsx)("div",{className:"text-center mt-5",children:(0,h.jsx)(u.A,{animation:"border",role:"status",children:(0,h.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):e?(0,h.jsx)(t.C5,{to:"/",replace:!0}):(0,h.jsx)(g.A,{className:"mt-5",children:(0,h.jsx)(p.A,{className:"justify-content-center",children:(0,h.jsx)(v.A,{md:6,lg:5,xl:4,children:(0,h.jsx)(x.A,{className:"p-4 shadow",children:(0,h.jsxs)(x.A.Body,{children:[(0,h.jsx)("h2",{className:"text-center mb-4 fw-bold",children:"Login"}),(0,h.jsx)(m,{}),(0,h.jsxs)("div",{className:"mt-3 text-center",children:["Don't have an account? ",(0,h.jsx)(t.N_,{to:"/register",children:"Register here"})]})]})})})})})}},8816:(e,a,s)=>{s.d(a,{D:()=>n,L:()=>t});var r=s(2162);const t=async e=>{try{return(await r.A.post("/auth/login",e)).data}catch(s){var a;throw console.error("Error during login:",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}},n=async e=>{try{return(await r.A.post("/auth/register",e)).data}catch(s){var a;throw console.error("Error during registration:",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}}}}]);
//# sourceMappingURL=144.2feeead4.chunk.js.map