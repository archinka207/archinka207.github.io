"use strict";(self.webpackChunktwentythree=self.webpackChunktwentythree||[]).push([[139],{6139:(e,a,s)=>{s.r(a),s.d(a,{default:()=>v});var r=s(5043),t=s(3260),n=s(8816),l=s(5460),o=s(1719),i=s(5296),c=s(4282),d=s(7417),m=s(579);const u=()=>{const[e,a]=(0,r.useState)(""),[s,u]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[w,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),b=(0,t.Zp)();return(0,m.jsxs)(l.A,{onSubmit:async r=>{if(r.preventDefault(),x(""),v(""),s===h)if(s.length<6)x("Password must be at least 6 characters long.");else if(e.length<3)x("Nickname must be at least 3 characters long.");else{y(!0);try{const r=await(0,n.D)({nickname:e,password:s});v(r+" You can now log in."),a(""),u(""),g(""),setTimeout((()=>{b("/login")}),3e3)}catch(o){var t,l;console.error("Registration attempt failed:",o);const e=(null===(t=o.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||o.message||"Registration failed. Please try a different nickname or try again later.";x(e)}finally{y(!1)}}else x("Passwords do not match.")},children:[" ",p&&(0,m.jsx)(o.A,{variant:"danger",className:"mb-3 py-2",children:p}),w&&(0,m.jsx)(o.A,{variant:"success",className:"mb-3 py-2",children:w}),(0,m.jsx)(i.A,{controlId:"registerNickname",label:"Nickname",className:"mb-3",children:(0,m.jsx)(l.A.Control,{type:"text",value:e,onChange:e=>a(e.target.value),required:!0,placeholder:"Choose a nickname",disabled:j,autoFocus:!0})}),(0,m.jsx)(i.A,{controlId:"registerPassword",label:"Password (min. 6 characters)",className:"mb-3",children:(0,m.jsx)(l.A.Control,{type:"password",value:s,onChange:e=>u(e.target.value),required:!0,placeholder:"Create a password",minLength:6,disabled:j,autoComplete:"new-password"})}),(0,m.jsx)(i.A,{controlId:"registerConfirmPassword",label:"Confirm Password",className:"mb-3",children:(0,m.jsx)(l.A.Control,{type:"password",value:h,onChange:e=>g(e.target.value),required:!0,placeholder:"Confirm your password",disabled:j,autoComplete:"new-password"})}),(0,m.jsx)(c.A,{variant:"primary",type:"submit",className:"w-100",disabled:j,children:j?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.A,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Registering..."]}):"Register"})]})};var h=s(3519),g=s(1072),p=s(8602),x=s(8628),w=s(342);const v=()=>{const{currentUser:e,loading:a}=(0,w.A)();return a?(0,m.jsx)("div",{className:"text-center mt-5",children:(0,m.jsx)(d.A,{animation:"border",role:"status",children:(0,m.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):e?(0,m.jsx)(t.C5,{to:"/",replace:!0}):(0,m.jsx)(h.A,{className:"mt-5",children:(0,m.jsx)(g.A,{className:"justify-content-center",children:(0,m.jsx)(p.A,{md:6,lg:5,xl:4,children:(0,m.jsx)(x.A,{className:"p-4 shadow",children:(0,m.jsxs)(x.A.Body,{children:[(0,m.jsx)("h2",{className:"text-center mb-4 fw-bold",children:"Register"}),(0,m.jsx)(u,{}),(0,m.jsxs)("div",{className:"mt-3 text-center",children:["Already have an account? ",(0,m.jsx)(t.N_,{to:"/login",children:"Login here"})]})]})})})})})}},8816:(e,a,s)=>{s.d(a,{D:()=>n,L:()=>t});var r=s(2162);const t=async e=>{try{return(await r.A.post("/auth/login",e)).data}catch(s){var a;throw console.error("Error during login:",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}},n=async e=>{try{return(await r.A.post("/auth/register",e)).data}catch(s){var a;throw console.error("Error during registration:",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}}}}]);
//# sourceMappingURL=139.e4dfce98.chunk.js.map